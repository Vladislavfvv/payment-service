–ü–æ—Ö–æ–∂–µ, Docker –Ω–µ –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å volume paymentservice_mongo_data, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–∞–∫–æ–π-—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—Å—ë –µ—â—ë –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ. –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º—Å—è —à–∞–≥ –∑–∞ —à–∞–≥–æ–º, –∫–∞–∫ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ volume.

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–≤–∫–ª—é—á–∞—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ):

docker ps -a


–ò—â–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –∏–º–µ–Ω–µ–º payment-service –∏–ª–∏ —Å –æ–±—Ä–∞–∑–æ–º mongo:6.

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–µ—Å–ª–∏ –æ–Ω –µ—â—ë —Ä–∞–±–æ—Ç–∞–µ—Ç):

docker stop payment-service


–∏–ª–∏ –ø–æ ID –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

docker stop <container_id>


–£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

docker rm payment-service


–∏–ª–∏ –ø–æ ID –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

docker rm <container_id>


–£–¥–∞–ª–∏—Ç—å volume:
–°–Ω–∞—á–∞–ª–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ:

docker volume ls


–î–æ–ª–∂–µ–Ω –±—ã—Ç—å paymentservice_mongo_data.
–£–¥–∞–ª—è–µ–º –µ–≥–æ:

docker volume rm paymentservice_mongo_data


‚ö†Ô∏è –ò–Ω–æ–≥–¥–∞ Windows –Ω–µ –¥–∞—ë—Ç —É–¥–∞–ª–∏—Ç—å volume, –µ—Å–ª–∏ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docker Desktop –∏–ª–∏ –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º. –ï—Å–ª–∏ –ø–æ—Å–ª–µ –≤—Å–µ—Ö —à–∞–≥–æ–≤ –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è ‚Äî –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –¥–∞—Ç—å –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —É–±—å—ë—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ —É–¥–∞–ª–∏—Ç volume.

–•–æ—á–µ—à—å —Ç–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç?

–í—ã —Å–∫–∞–∑–∞–ª–∏:
–¥–∞–≤–∞–π
ChatGPT —Å–∫–∞–∑–∞–ª:

–û–∫–µ–π, –≤–æ—Ç –∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —É–¥–∞–ª–∏—Ç –µ–≥–æ –∏ —É–¥–∞–ª–∏—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–π volume –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑:

docker-compose down -v --rmi all --remove-orphans


–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

down ‚Äî –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ —É–¥–∞–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–µ—Ç–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å docker-compose.yml.

-v ‚Äî —É–¥–∞–ª—è–µ—Ç –≤—Å–µ volumes, –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ –≤ docker-compose.yml.

--rmi all ‚Äî —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –æ–±—Ä–∞–∑—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (–º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å, –µ—Å–ª–∏ –Ω–µ —Ö–æ—á–µ—à—å —É–¥–∞–ª—è—Ç—å –æ–±—Ä–∞–∑—ã).

--remove-orphans ‚Äî —É–¥–∞–ª—è–µ—Ç "—Å–∏—Ä–æ—Ç—Å–∫–∏–µ" –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –Ω–µ –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–º docker-compose.yml.

–ï—Å–ª–∏ volume –≤—Å—ë —Ä–∞–≤–Ω–æ –æ—Å—Ç–∞—ë—Ç—Å—è ‚Äúin use‚Äù, —Ç–æ–≥–¥–∞ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –µ–≥–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ:

docker volume rm -f paymentservice_mongo_data


üí° –°–æ–≤–µ—Ç: —Å–Ω–∞—á–∞–ª–∞ —É–±–µ–¥–∏—Å—å, —á—Ç–æ –±–æ–ª—å—à–µ –Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç:

docker ps -a


–•–æ—á–µ—à—å, —è –¥–∞–º –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É, –∫–æ—Ç–æ—Ä–∞—è —É–±—å—ë—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ —É–¥–∞–ª–∏—Ç –≤—Å–µ volumes –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞, —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë?

–í—ã —Å–∫–∞–∑–∞–ª–∏:
–¥–∞–≤–∞–π
ChatGPT —Å–∫–∞–∑–∞–ª:

–í–æ—Ç –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ volumes –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ Docker:

docker-compose down -v --remove-orphans && docker volume prune -f


–†–∞–∑–±–æ—Ä:

docker-compose down -v --remove-orphans ‚Äî –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–µ—Ç–∏, volumes (—Ç–æ–ª—å–∫–æ —Ç–µ, —á—Ç–æ –≤ docker-compose.yml) –∏ ‚Äú—Å–∏—Ä–æ—Ç—Å–∫–∏–µ‚Äù –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.

docker volume prune -f ‚Äî —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes –Ω–∞ –º–∞—à–∏–Ω–µ –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: —ç—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes, —Ç–∞–∫ —á—Ç–æ —É–±–µ–¥–∏—Å—å, —á—Ç–æ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–µ–∫—Ç—ã Docker –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –Ω–∏—Ö.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –¥–∞—Ç—å –µ—â—ë –±–æ–ª–µ–µ –∂—ë—Å—Ç–∫—É—é –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —É–¥–∞–ª–∏—Ç –¥–∞–∂–µ –∑–∞–Ω—è—Ç—ã–π volume paymentservice_mongo_data.

–•–æ—á–µ—à—å –µ—ë?

–í—ã —Å–∫–∞–∑–∞–ª–∏:
–¥–∞–≤–∞–π
ChatGPT —Å–∫–∞–∑–∞–ª:

–•–æ—Ä–æ—à–æ, –≤–æ—Ç –∂—ë—Å—Ç–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–±—å—ë—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ —É–¥–∞–ª–∏—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã–π volume –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω ‚Äú–∑–∞–Ω—è—Ç‚Äù:

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ:

docker rm -f payment-service


–∏–ª–∏ –µ—Å–ª–∏ –Ω–µ –ø–æ–º–Ω–∏—à—å –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –µ–≥–æ ID:

docker ps -a


–∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –≤–º–µ—Å—Ç–æ payment-service.

–£–¥–∞–ª–∏—Ç—å volume –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ:

docker volume rm -f paymentservice_mongo_data


üí° –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ volume –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω, –¥–∞–∂–µ –µ—Å–ª–∏ Docker –¥—É–º–∞–µ—Ç, —á—Ç–æ –æ–Ω –∑–∞–Ω—è—Ç.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –Ω–∞–ø–∏—Å–∞—Ç—å –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É –≤ PowerShell, –∫–æ—Ç–æ—Ä–∞—è —Å–¥–µ–ª–∞–µ—Ç —ç—Ç–æ –≤—Å—ë —Å—Ä–∞–∑—É –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑, –±–µ–∑ —Ä—É—á–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–•–æ—á–µ—à—å —Ç–∞–∫—É—é –∫–æ–º–∞–Ω–¥—É?




–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Docker –æ–±—Ä–∞–∑–∞–º–∏:
–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Ç–µ–∫—É—â–∏–π —Å–ª—É—á–∞–π):
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ãdocker-compose down# 2. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –æ–±—Ä–∞–∑ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)docker rmi paymentservice-payment-service# 3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—ådocker-compose up -d --build
–î–ª—è production:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤ –≤–º–µ—Å—Ç–æ latest:
# docker-compose.ymlservices:  payment-service:    image: paymentservice-payment-service:v1.0.0  # –≤–º–µ—Å—Ç–æ latest
–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é/–º–µ—Å—è—Ü):
# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ãdocker image prune -a# –ò–ª–∏ –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ãdocker system prune -a